<!-- /templates/search.liquid -->
{% comment %}

  To return only products or pages in results:
    - http://docs.shopify.com/manual/configuration/store-customization/return-only-product-in-storefront-search-results
    - Or manually add type=product or type=page to the search URL as a parameter

{% endcomment %}
{% include 'product-grid-width' with product_image_type: section.settings.product_image_type, product_image_size: section.settings.product_image_size %}

{% paginate search.results by 12 %}

  {% if search.performed %}
    <header>
    {% if search.results_count == 0 %}
      <h1 class="search-title">{{ 'general.search.no_results_html' | t: terms: search.terms }}</h1>
    {% else %}
      {% assign product_count = shop.products_count %}
      <h1 class="search-title">{{ 'general.search.results_with_count' | t: count: search.results_count, term: search.terms }}</h1>
    {% endif %}
    </header>
  {% endif %}

  {% if search.performed %}
    {% comment %}
      Set grid item widths based on settings
    {% endcomment %}

    <div class="grid search-grid grid--uniform">
      {% for item in search.results %}
        {% comment %}
          If a search item has a price, it's a product
        {% endcomment %}

        {% assign product = item %}

        {% assign price = product.price | money_without_trailing_zeros %}
        {% include 'product-grid-item' with product_image_spacing: section.settings.product_image_spacing, vendor_enable: section.settings.vendor_enable %}

      {% endfor %}
    </div>

    {% if paginate.pages > 1 %}
      {% include 'pagination' %}
    {% endif %}

  {% endif %}

{% assign dm_paginate_by = paginate.page_size %}{% endpaginate %}

{% if dm_paginate_by %}{% render 'spurit_dmr_collection_template_snippet', paginate_by: dm_paginate_by %}{% endif %}{% schema %}
  {
    "name": {
      "de": "Suchen",
      "en": "Search",
      "ja": "検索",
      "pt-BR": "Pesquisa",
      "es": "Buscar",
      "it": "Cerca",
      "fr": "Rechercher"
    },
    "class": "search-template-section",
    "settings": [
      {
        "type": "header",
        "content": {
          "de": "Darstellung",
          "en": "Appearance",
          "ja": "外観",
          "pt-BR": "Aparência",
          "es": "Apariencia",
          "it": "Aspetto",
          "fr": "Apparence"
        }
      },
      {
        "type": "select",
        "id": "product_image_type",
        "label": {
          "de": "Bildstil",
          "en": "Image style",
          "ja": "画像スタイル",
          "pt-BR": "Estilo da imagem",
          "es": "Estilo de imagen",
          "it": "Stile immagine",
          "fr": "Style d'image"
        },
        "options": [
          {
            "value": "portrait",
            "label": {
              "de": "Hoch/Quadrat",
              "en": "Tall/square",
              "ja": "縦長/正方形",
              "pt-BR": "Alto/quadrado",
              "es": "Alta/cuadrada",
              "it": "Verticale/quadrata",
              "fr": "Grand/carré"
            }
          },
          {
            "value": "landscape",
            "label": {
              "de": "Breit",
              "en": "Wide",
              "ja": "横長",
              "pt-BR": "Grande",
              "es": "Ancho",
              "it": "Orizzontale",
              "fr": "Large"
            }
          }
        ]
      },
      {
        "type": "select",
        "id": "product_image_size",
        "label": {
          "de": "Foto-Größe",
          "en": "Image size",
          "ja": "画像のサイズ",
          "pt-BR": "Tamanho da imagem",
          "es": "Tamaño de la imagen",
          "it": "Dimensione immagine",
          "fr": "Taille de l'image"
        },
        "default": "medium",
        "options": [
          {
            "value": "small",
            "label": {
              "de": "Klein",
              "en": "Small",
              "ja": "小",
              "pt-BR": "Pequeno",
              "es": "Pequeña",
              "it": "Small",
              "fr": "Petite"
            }
          },
          {
            "value": "medium",
            "label": {
              "de": "Mitte",
              "en": "Medium",
              "ja": "中",
              "pt-BR": "Médio",
              "es": "Mediana",
              "it": "Medium",
              "fr": "Moyenne"
            }
          },
          {
            "value": "large",
            "label": {
              "de": "Groß",
              "en": "Large",
              "ja": "大",
              "pt-BR": "Grande",
              "es": "Grande",
              "it": "Large",
              "fr": "Grande"
            }
          },
          {
            "value": "xlarge",
            "label": {
              "de": "Extra groß",
              "en": "Extra large",
              "ja": "特大",
              "pt-BR": "Extra grande",
              "es": "Extra grande",
              "it": "Extra large",
              "fr": "Très grande"
            }
          }
        ]
      },
      {
        "type": "checkbox",
        "id": "product_image_spacing",
        "label": {
          "de": "Abstände zwischen Bildern hinzufügen",
          "en": "Add spacing between images",
          "ja": "画像に間隔を追加する",
          "pt-BR": "Adicione espaçamento entre as imagens",
          "es": "Agregar espacio entre las imágenes",
          "it": "Aggiungi spaziatura tra le immagini",
          "fr": "Ajouter un espacement entre les images"
        }
      },
      {
        "type": "checkbox",
        "id": "vendor_enable",
        "label": {
          "de": "Produktverkäufer anzeigen",
          "en": "Show product vendor",
          "ja": "商品の販売元を表示する",
          "pt-BR": "Exiba o fornecedor do produto",
          "es": "Mostrar proveedor del producto",
          "it": "Mostra fornitore prodotto",
          "fr": "Afficher le distributeur du produit"
        }
      }
    ]
  }
{% endschema %}
